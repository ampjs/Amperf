'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _Amperf2=require('./Amperf.js'),_Amperf3=_interopRequireDefault(_Amperf2),_path=require('path'),_path2=_interopRequireDefault(_path),_fs=require('fs'),_fs2=_interopRequireDefault(_fs),_outputs=require('@ampersarnie/outputs'),_outputs2=_interopRequireDefault(_outputs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var a=function(_Amperf){function a(){_classCallCheck(this,a);var _this=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,{template:__dirname+'/DefaultTemplate.js'}));return'undefined'==typeof process?console.warn('AmperfNode can only run in a node environment, please use Amperf for the browser.'):(_this._setNodeArguments(),global.Amperf=_this,_this.loadTests()),_this}return _inherits(a,_Amperf),_createClass(a,[{key:'loadTests',value:function loadTests(){var _this2=this,b=_path2.default.resolve(process.cwd(),this.options.file);_fs2.default.lstat(b,function(c,d){null!==c&&'ENOENT'===c.code&&(_outputs2.default.message('\u001b[31m'+c.message+'\u001b[0m\n'),process.exit(1)),d.isDirectory()&&_this2.loadDirectory(b),d.isFile()&&_this2.loadFile(b)})}},{key:'loadDirectory',value:function loadDirectory(b){var _this3=this;_fs2.default.readdir(b,function(c,d){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=d[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var e=_step.value;_this3.loadFile(b+'/'+e)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}})}},{key:'loadFile',value:function loadFile(b){_outputs2.default.message('\u001b[1mRunning Test: \u001b[0m'+b+'\n'),require(b)}},{key:'_setNodeArguments',value:function _setNodeArguments(){var _this4=this,b=process.argv.slice(2);b.forEach(function(c,d,e){var f=c.split('=');switch(f[0]){case'--file':case'-f':_this4.options.file=e[d+1];break;case'--template':case'--t':_this4.options.template=e[d+1];break;case'--iterations':case'--i':_this4.options.iterations=e[d+1];break;case'--show':_this4.options.show=e[d+1].split(',');}})}}]),a}(_Amperf3.default);exports.default=a;